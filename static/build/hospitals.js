import a from"regenerator-runtime";import b from"./components/Dropdown.js";import c from"./components/LoadingIcon.js";import d from"./components/SearchBar.js";import e from"./pages/hospital/HospitalDisplay.js";function f(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=new Array(b);c<b;c++)d[c]=a[c];return d}function g(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function h(a,b){var c,d,e,f,g,h;return null!=b&&"undefined"!=typeof Symbol&&b[Symbol.hasInstance]?b[Symbol.hasInstance](a):(c=a,null!=(d=b)&&"undefined"!=typeof Symbol&&d[Symbol.hasInstance]?d[Symbol.hasInstance](c):(e=c,null!=(f=d)&&"undefined"!=typeof Symbol&&f[Symbol.hasInstance]?f[Symbol.hasInstance](e):(g=e,null!=(h=f)&&"undefined"!=typeof Symbol&&h[Symbol.hasInstance]?h[Symbol.hasInstance](g):g instanceof h)))}function i(a){for(var b=function(c,d){var e,f,g;f=null!=c[e=d]?c[e]:{},g=Object.keys(f),"function"==typeof Object.getOwnPropertySymbols&&(g=g.concat(Object.getOwnPropertySymbols(f).filter(function(a){return Object.getOwnPropertyDescriptor(f,a).enumerable}))),g.forEach(function(b){var c,d,e;c=a,d=b,e=f[b],(d in c)?Object.defineProperty(c,d,{value:e,enumerable:!0,configurable:!0,writable:!0}):c[d]=e})},c=arguments,d=1;d<arguments.length;d++)b(c,d);return a}function j(a,b){return(function(a){if(Array.isArray(a))return a})(a)||(function(a,b){var c,d,e=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=e){var f=[],g=!0,h=!1;try{for(e=e.call(a);!(g=(c=e.next()).done)&&(f.push(c.value),!b||f.length!==b);g=!0);}catch(i){h=!0,d=i}finally{try{g||null==e.return||e.return()}finally{if(h)throw d}}return f}})(a,b)||k(a,b)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function k(a,b){if(a){if("string"==typeof a)return f(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return f(a,b)}}var l=React.useEffect,m=React.useState,n=React.useReducer,o=location.origin+"/api/data/",p=new Map;function q(){var a=j(m(STATS_DATA.state_names[15]),2),f=a[0],g=a[1],h=j(n(s,{searchQuery:"",hospitals:null,filtered:null,region:null}),2),i=h[0],k=i.searchQuery,o=i.hospitals,p=i.filtered,q=h[1],t=j(m(""),2),v=t[0],w=t[1];return l(function(){var a=f;u(a).then(function(b){return b||(b="Failed to fetch Data"),"string"==typeof b?w(b+", Contact a developer if the issue persists"):void(b.data=b.data.sort(function(a,b){return b.available_beds_with_oxygen-a.available_beds_with_oxygen}),q({values:b.data,region:a}))}).catch(console.error)},[f]),v?React.createElement("span",{color:"red"}," ",v," "):o&&o.region===f?React.createElement("div",{id:"display"},React.createElement(d,{searchQuery:k,setSearchQuery:q}),React.createElement("div",{id:"dropDown-bar"},React.createElement(b,{options:STATS_DATA.state_names,value:f,onChange:function(a){return g(a.value)}}),React.createElement(r,{hospitals:o,setSearchQuery:q})),React.createElement(e,{hospitals:p})):React.createElement("div",{id:"loadingDisplay",style:{display:"grid",placeItems:"center"}}," ",React.createElement(c,null)," ")}function r(a){var d=a.hospitals,e=a.setSearchQuery,g=j(m(null),2),h=g[0],i=g[1];return l(function(){var a;i(["All Regions"].concat(function(a){if(Array.isArray(a))return f(a)}(a=new Set(d.values.map(function(a){return a.area||"NA"})))||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||k(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))},[d]),d&&h?React.createElement(b,{options:h,value:"All Regions",onChange:function(a){return e({type:"region",region:a.value})}}):React.createElement("div",{id:"loadingDisplay",style:{display:"grid",placeItems:"center"}}," ",React.createElement(c,null)," ")}function s(a,b){if("string"==typeof b||!b)return i({},a,{searchQuery:b,filtered:t(a.hospitals,b,a.region)});if(h(b,Object)&&b.values&&b.region)return i({},a,{hospitals:b,filtered:t(b,a.searchQuery,a.region)});if(h(b,Object)&&"region"===b.type&&b.region)return i({},a,{region:b.region,filtered:t(a.hospitals,a.searchQuery,b.region)});throw new Error}function t(a,b,c){var d;if(!a||0===(null===(d=a.values)|| void 0===d?void 0:d.length))return[];var e=a.values;return(c&&"All Regions"!==c&&(e=e.filter(function(a){return a.area===c})),b&&""!==b)?e=e.filter(function(a){return a.hospital_name.toLowerCase().includes(b.toLowerCase())}):e}function u(a){return v.apply(this,arguments)}function v(){var b;return(v=(b=a.mark(function a(b){var c,d,e;return b.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=STATS_DATA.code_names[STATS_DATA.state_names.indexOf(b)]){a.next=3;break}return a.abrupt("return","Invalid State Name");case 3:if(!(d=p.get(c))){a.next=6;break}return a.abrupt("return",d);case 6:if(e=fetch("".concat(o,"?name=").concat(c)).then(function(a){return a.json()}).catch(console.error),p.set(c,e),!e){a.next=14;break}return a.next=11,e;case 11:a.t0=a.sent,a.next=15;break;case 14:a.t0="Failed to fetch data from API";case 15:return a.abrupt("return",a.t0);case 16:case"end":return a.stop()}},a)}),function v(){var c=this,d=arguments;return new Promise(function(a,e){var f=b.apply(c,d);function h(b){g(f,a,e,h,i,"next",b)}function i(b){g(f,a,e,h,i,"throw",b)}h(void 0)})})).apply(this,arguments)}document.addEventListener("DOMContentLoaded",function(){ReactDOM.render(React.createElement(q,null),document.getElementById("root"))}),u(STATS_DATA.state_names[15])