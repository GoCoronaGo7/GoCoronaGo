function a(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function c(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function d(a){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function e(b,c){return c&&("object"===g(c)||"function"==typeof c)?c:a(b)}function f(a,b){return(f=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var g=function(a){var b,c,d;return a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":void 0===a?"undefined":(b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":void 0===b?"undefined":(c=b)&&"undefined"!=typeof Symbol&&c.constructor===Symbol?"symbol":void 0===c?"undefined":(d=c)&&"undefined"!=typeof Symbol&&d.constructor===Symbol?"symbol":typeof d},h=React.Component,i=React.createRef,j=function(a){return Object.entries(a).reduce(function(a,b){var c,d,e=(d=2,function(a){if(Array.isArray(a))return a}(c=b)||function(a,b){var c,d,e=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=e){var f=[],g=!0,h=!1;try{for(e=e.call(a);!(g=(c=e.next()).done)&&(f.push(c.value),!b||f.length!==b);g=!0);}catch(i){h=!0,d=i}finally{try{g||null==e.return||e.return()}finally{if(h)throw d}}return f}}(c,d)||function(a,b){if(a){if("string"==typeof a)return a(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return a(a,b)}}(c,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=e[0],g=e[1];return a+=g?" ".concat(f):""},"")},k="Select...",l=function(g){"use strict";!function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&f(a,b)}(q,g);var h,l,m,n,o,p=(n=q,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,b=d(n);if(o){var c=d(this).constructor;a=Reflect.construct(b,arguments,c)}else a=b.apply(this,arguments);return e(this,a)});function q(b){var c;return!function(a,b){var c,d,e,f,g,h;if(c=a,null!=(d=b)&&"undefined"!=typeof Symbol&&d[Symbol.hasInstance]?!d[Symbol.hasInstance](c):(e=c,null!=(f=d)&&"undefined"!=typeof Symbol&&f[Symbol.hasInstance]?!f[Symbol.hasInstance](e):(g=e,null!=(h=f)&&"undefined"!=typeof Symbol&&h[Symbol.hasInstance]?!h[Symbol.hasInstance](g):!(g instanceof h))))throw new TypeError("Cannot call a class as a function")}(this,q),(c=p.call(this,b)).state={selected:c.parseValue(b.value,b.options)||{label:void 0===b.placeholder?k:b.placeholder,value:""},isOpen:!1},c.dropdownRef=i(),c.mounted=!0,c.handleDocumentClick=c.handleDocumentClick.bind(a(c)),c.fireChangeEvent=c.fireChangeEvent.bind(a(c)),e(c)}return h=q,l=[{key:"componentDidUpdate",value:function(a){if(this.props.value!==a.value)if(this.props.value){var b=this.parseValue(this.props.value,this.props.options);b!==this.state.selected&&this.setState({selected:b})}else this.setState({selected:{label:void 0===this.props.placeholder?k:this.props.placeholder,value:""}})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,!1)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,!1)}},{key:"handleMouseDown",value:function(a){this.props.onFocus&&"function"==typeof this.props.onFocus&&this.props.onFocus(this.state.isOpen),("mousedown"!==a.type||0===a.button)&&(a.stopPropagation(),a.preventDefault(),this.props.disabled||this.setState({isOpen:!this.state.isOpen}))}},{key:"parseValue",value:function(a,b){var c;if("string"==typeof a)for(var d=0,e=b.length;d<e;d++)if("group"===b[d].type){var f=b[d].items.filter(function(b){return b.value===a});f.length&&(c=f[0])}else void 0!==b[d].value&&b[d].value===a&&(c=b[d]);return c||a}},{key:"setValue",value:function(a,b){var c={selected:{value:a,label:b},isOpen:!1};this.fireChangeEvent(c),this.setState(c)}},{key:"fireChangeEvent",value:function(a){a.selected!==this.state.selected&&this.props.onChange&&this.props.onChange(a.selected)}},{key:"renderOption",value:function(a){var b,d=a.value;void 0===d&&(d=a.label||a);var e=a.label||a.value||a,f=d===this.state.selected.value||d===this.state.selected,g=j((c(b={},"".concat(this.props.baseClassName,"-option"),!0),c(b,a.className,!!a.className),c(b,"is-selected",f),b));return React.createElement("div",{key:d,className:g,onMouseDown:this.setValue.bind(this,d,e),onClick:this.setValue.bind(this,d,e),role:"option","aria-selected":f?"true":"false"},e)}},{key:"buildMenu",value:function(){var a=this,b=this.props,c=b.options,d=b.baseClassName,e=c.map(function(b){if("group"===b.type){var c=a,e=React.createElement("div",{className:"".concat(d,"-title")},b.name),f=b.items.map(function(a){return c.renderOption(a)});return React.createElement("div",{className:"".concat(d,"-group"),key:b.name,role:"listbox",tabIndex:"-1"},e,f)}return a.renderOption(b)});return e.length?e:React.createElement("div",{className:"".concat(d,"-noresults")},"No options found")}},{key:"handleDocumentClick",value:function(a){this.mounted&&!this.dropdownRef.current.contains(a.target)&&this.state.isOpen&&this.setState({isOpen:!1})}},{key:"isValueSelected",value:function(){return"string"==typeof this.state.selected||""!==this.state.selected.value}},{key:"render",value:function(){var a,b,d,e,f,g=this.props,h=g.baseClassName,i=g.controlClassName,k=g.placeholderClassName,l=g.menuClassName,m=g.arrowClassName,n=g.arrowClosed,o=g.arrowOpen,p=g.className,q=this.props.disabled?"Dropdown-disabled":"",r="string"==typeof this.state.selected?this.state.selected:this.state.selected.label,s=j((c(a={},"".concat(h,"-root"),!0),c(a,p,!!p),c(a,"is-open",this.state.isOpen),a)),t=j((c(b={},"".concat(h,"-control"),!0),c(b,i,!!i),c(b,q,!!q),b)),u=j((c(d={},"".concat(h,"-placeholder"),!0),c(d,k,!!k),c(d,"is-selected",this.isValueSelected()),d)),v=j((c(e={},"".concat(h,"-menu"),!0),c(e,l,!!l),e)),w=j((c(f={},"".concat(h,"-arrow"),!0),c(f,m,!!m),f)),x=React.createElement("div",{className:u},r),y=this.state.isOpen?React.createElement("div",{className:v,"aria-expanded":"true"},this.buildMenu()):null;return React.createElement("div",{ref:this.dropdownRef,className:s},React.createElement("div",{className:t,onMouseDown:this.handleMouseDown.bind(this),onTouchEnd:this.handleMouseDown.bind(this),"aria-haspopup":"listbox"},x,React.createElement("div",{className:"".concat(h,"-arrow-wrapper")},o&&n?this.state.isOpen?o:n:React.createElement("span",{className:w}))),y)}}],b(h.prototype,l),m&&b(h,m),q}(h);l.defaultProps={baseClassName:"Dropdown"};export default l