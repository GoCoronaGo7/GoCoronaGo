{"version":3,"sources":["../../../client/src/components/HospitalDisplay.jsx"],"names":["useState","useEffect","React","ITEMS_COUNT","icons","start","previous","next","end","buttonClickHandlers","page","setPage","click","maxPages","HospitalsDisplay","hospitals","Math","ceil","length","propTypes","PropTypes","array","Navigator","listeners","handlerFactory","handler","key","Object","entries","element","document","getElementById","func","addEventListener","push","el","removeEventListener","clickable","removeAttribute","setAttribute","transform","display","width","justifyContent","number","isRequired","TabledDisplay","splice","map","x","hospital_name","TableItem","data","beds","normal","available_beds_without_oxygen","total_beds_without_oxygen","oxygen","available_beds_with_oxygen","icu","available_icu_beds_without_ventilator","total_icu_beds_without_ventilator","vent","available_icu_beds_with_ventilator","total_icu_beds_with_ventilator","stats","val","calcColour","area","object"],"mappings":"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","sourcesContent":["const { useState, useEffect } = React\n\nconst ITEMS_COUNT = 15\nconst icons = {\n    start: 'https://github.com/google/material-design-icons/raw/master/ios/av/fast_rewind/materialicons/black/baseline_fast_rewind_black_48pt.xcassets/baseline_fast_rewind_black_48pt.imageset/baseline_fast_rewind_black_48pt_3x.png',\n    previous: 'https://github.com/google/material-design-icons/raw/master/ios/navigation/arrow_back_ios/materialicons/black/baseline_arrow_back_ios_black_48pt.xcassets/baseline_arrow_back_ios_black_48pt.imageset/baseline_arrow_back_ios_black_48pt_3x.png',\n    next: 'https://github.com/google/material-design-icons/raw/master/ios/navigation/arrow_forward_ios/materialicons/black/baseline_arrow_forward_ios_black_48pt.xcassets/baseline_arrow_forward_ios_black_48pt.imageset/baseline_arrow_forward_ios_black_48pt_3x.png',\n    end: 'https://github.com/google/material-design-icons/raw/master/ios/av/fast_forward/materialicons/black/baseline_fast_forward_black_48pt.xcassets/baseline_fast_forward_black_48pt.imageset/baseline_fast_forward_black_48pt_3x.png'\n}\n\nconst buttonClickHandlers = {\n    start: (page, setPage, click) => {\n        if (page <= 1) return false\n        if (click) setPage(1)\n        return true\n    },\n    previous: (page, setPage, click) => {\n        if (page === 1) return false\n        if (click) setPage(page - 1)\n        return true\n    },\n    next: (page, setPage, click, maxPages) => {\n        if (page >= maxPages - 1) return false\n        if (click) setPage(page + 1)\n        return true\n    },\n    end: (page, setPage, click, maxPages) => {\n        if (page === maxPages - 1) return false\n        if (click) setPage(maxPages - 2)\n        return true\n    }\n}\n\nexport default function HospitalsDisplay ({ hospitals }) {\n    const [page, setPage] = useState(1)\n    const maxPages = Math.ceil(hospitals.length / ITEMS_COUNT)\n    return (\n        <div id=\"hospitalsDisplay\">\n            <Navigator page={page} setPage={setPage} maxPages={maxPages}/>\n            <TabledDisplay hospitals={hospitals} page={page} />\n        </div>\n    )\n}\nHospitalsDisplay.propTypes = {\n    hospitals: PropTypes.array\n}\n\nfunction Navigator ({ page, setPage, maxPages }) {\n    useEffect(() => {\n        const listeners = []\n        const handlerFactory = (handler) => () => {\n            handler(page, setPage, true, maxPages)\n        }\n        for (const [key, handler] of Object.entries(buttonClickHandlers)) {\n            const element = document.getElementById(`nav-${key}`)\n            const func = handlerFactory(handler)\n            element.addEventListener('click', func)\n            listeners.push([element, func])\n        }\n        return () => {\n            for (const [el, handler] of listeners) {\n                el.removeEventListener('click', handler)\n            }\n        }\n    })\n\n    useEffect(() => {\n        const handlerFactory = (handler) => () => handler(page, setPage, false, maxPages)\n\n        for (const [key, handler] of Object.entries(buttonClickHandlers)) {\n            const element = document.getElementById(`nav-${key}`)\n            const clickable = handlerFactory(handler)\n            if (clickable()) element.removeAttribute('disabled')\n            else element.setAttribute('disabled', 'disabled')\n        }\n    }, [page, setPage, maxPages])\n\n    return (<div id=\"navigator\">\n        <button id=\"nav-start\" > <img src={icons.start} alt=\"start\" /></button>\n        <button id=\"nav-previous\"> <img style={{ transform: 'translateX(5px)' }}src={icons.previous} alt=\"previous\" /></button>\n        <button id=\"nav-current\" style={{ display: 'flex', width: '60px', justifyContent: 'center' }}> {page} </button>\n        <button id=\"nav-next\"> <img src={icons.next} alt=\"next\" /></button>\n        <button id=\"nav-end\"> <img src={icons.end} alt=\"end\" /></button>\n    </div>)\n}\n\nNavigator.propTypes = {\n    page: PropTypes.number.isRequired,\n    setPage: PropTypes.func.isRequired,\n    maxPages: PropTypes.number.isRequired\n}\n\nfunction TabledDisplay ({ hospitals, page }) {\n    return (\n        <div id=\"hospitalsTable\">\n            <div className=\"hospitalTableRow header\">\n                <span className=\"hospitalName\">&nbsp;</span>\n                <span className=\"statsCell\" > Normal Beds </span>\n                <span className=\"statsCell\" > Oxygen Beds </span>\n                <span className=\"statsCell\" > ICU Units </span>\n                <span className=\"statsCell\" > Ventilator Units </span>\n            </div>\n            {hospitals.splice(page * ITEMS_COUNT, ITEMS_COUNT).map(x => <TableItem key={x.hospital_name} data={x} />)}\n\n        </div>\n    )\n}\nTabledDisplay.propTypes = {\n    hospitals: PropTypes.array,\n    page: PropTypes.number\n}\n\nfunction TableItem ({ data }) {\n    if (!data) return null\n    const beds = {\n        normal: [data.available_beds_without_oxygen, data.total_beds_without_oxygen],\n        oxygen: [data.available_beds_with_oxygen, data.total_beds_without_oxygen],\n        icu: [data.available_icu_beds_without_ventilator, data.total_icu_beds_without_ventilator],\n        vent: [data.available_icu_beds_with_ventilator, data.total_icu_beds_with_ventilator]\n    }\n    const stats = []\n    for (const [key, val] of Object.entries(beds)) {\n        stats.push(<span key={key} className={'statsCell statsDisplayCell ' + calcColour(val)}>{val[0]}/ {val[1]}</span>)\n    }\n    return <div className=\"hospitalTableRow\">\n        <div className=\"hospitalName\">\n            <div>\n                <span className=\"left\"> {data.hospital_name} </span>\n            </div>\n            <span className=\"region\"> {data.area} </span>\n        </div>\n        { stats }\n    </div>\n}\nTableItem.propTypes = {\n    data: PropTypes.object\n}\n\nfunction calcColour (val) {\n    if (val[0] === -1 || val[1] === -1) {\n        val[0] = '?'\n        val[1] = '?'\n        return 'orange'\n    }\n    if (val[0] === 0) return 'red'\n    if (val[0] === val[1]) return 'green'\n    else return 'orange'\n}\n"],"file":"HospitalDisplay.js"}